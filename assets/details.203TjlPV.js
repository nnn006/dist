import{j as q,m as K,d as Q,f as z,n as G,o as J,u as W,p as X,r as Z,a as ee}from"./index.C__3lhMr.js";import{l as te,R as ae,r as m,i as oe,b as ne,d as se,K as v,L as f,U as k,V as s,k as o,u as a,N as n,O as l,M as u,F as ie,S as p,D as le}from"./vue.C2TeXnf4.js";import{_ as d}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.MpSsZcmr.js";import{_ as de}from"./imprestSheet.vue_vue_type_script_setup_true_name_imprest-sheet_lang.DLKrKH2L.js";import"./right-arrow-icon.CaFxgYzl.js";import"./index.DcHIdklB.js";const fe={class:"add-home-box hk-flex hk-flex-col container-setPx"},ce={class:"add-home-form"},re={class:"staff-details-info"},me={class:"staff-details-info"},ue={class:"staff-details-info"},_e={class:"staff-details-info"},be={class:"staff-details-info"},ve={key:0,class:"staff-details-info"},he={key:1,class:"staff-details-info"},ge={class:"staff-details-info"},pe=n("div",{class:"staff-details-info pydtl-color-err"},"离职",-1),ye={class:"staff-details-info"},Ie=n("div",{class:"footer-aux-btmbox"},null,-1),ke={key:0,class:"footer-btn-box"},xe={key:1,class:"footer-btn-box"},Te={class:"staff-details-dialog"},Be={class:"pd-dialog-content"},Se=n("p",null,"提示：请勿忘记线下收回备用金",-1),Ue=te({__name:"details",setup(Me){const{t:i}=W(),x=ae(),{id:_,homeId:h,newsStatus:Ce}=x.query,C=q(),r=m(""),y=m(!0),g=m(2),{hkMessage:I}=ee(),{auth:H,isStaff:He,isHk:Pe}=K(),{pushName:b,comeback:P}=Q(),w=oe("endPageLoading"),T=m(null),B=m(null),S=m(null),e=ne({nickname:"",avatar:"",homeName:"",birthday:"",contactInformation:"",identifyMsgId:"",duties:"",country:"",joinTime:0,countryId:0,currency:"",memberId:0}),N=c=>{X({identifyId:+_}).then(t=>{t.code===0?(e.avatar=t.data.avatar,e.nickname=t.data.nickname,e.homeName=t.data.homeName,e.birthday=t.data.birthday,e.contactInformation=t.data.contactInformation,e.identifyMsgId=t.data.identifyMsgId,e.country=t.data.country,e.duties=t.data.duties,e.joinTime=t.data.joinTime,e.countryId=t.data.countryId,e.currency=t.data.currency,e.memberId=t.data.identifyId,g.value=t.data.status):I(t.msg)}).finally(()=>{y.value=!1,c&&c()})},R=()=>{T.value.taggleDialog(!0)},O=()=>{Z({identifyId:+_,homeId:+h}).then(c=>{c.code===0?(I("离职成功"),P()):I(c.msg)})},j=()=>{b("StaffEdit",{id:_,homeId:h})},D=()=>{b("StaffEdit",{id:_,homeId:h,tp:"staff"})},U=()=>{S.value.taggleSheetVisible(!0)},V=c=>{b("ImpOperation",{id:_,homeId:h,currency:e.currency,doType:c.value})},E=()=>{B.value.taggleModal()};return se(()=>{N(w),r.value=x.query.tp||"other"}),(c,t)=>{const F=v("InfoItemImg"),M=v("BaseHandleBtn"),L=v("ConfrimPopAgain"),$=v("PreviewImage"),Y=v("MainContainer");return f(),k(Y,null,{header:s(()=>[o(z,{title:r.value==="staff"?"个人资料":r.value==="other"?a(i)("base.staffInfoTxt"):""},null,8,["title"])]),default:s(()=>[n("div",fe,[n("div",ce,[o(d,{class:"pd-img",label:"照片"},{default:s(()=>[o(F,{class:"bi-info-img",imgUrl:e.avatar,onClick:E},null,8,["imgUrl"])]),_:1}),o(d,{label:a(i)("base.nameTxt")},{default:s(()=>[n("div",re,l(e.nickname),1)]),_:1},8,["label"]),o(d,{label:a(i)("base.jopTxt")},{default:s(()=>[n("div",me,l(e.duties),1)]),_:1},8,["label"]),o(d,{label:a(i)("base.belongHomeTxt")},{default:s(()=>[n("div",ue,l(e.homeName),1)]),_:1},8,["label"]),o(d,{label:a(i)("base.nationTxt")},{default:s(()=>[n("div",_e,l(e.country),1)]),_:1},8,["label"]),o(d,{label:a(i)("base.idCard")},{default:s(()=>[n("div",be,l(e.identifyMsgId),1)]),_:1},8,["label"]),o(d,{label:a(i)("base.telNotxt")},{default:s(()=>[e.contactInformation?(f(),u("div",ve,l(e.contactInformation),1)):(f(),u(ie,{key:1},[e.memberId===a(C).userInfo.identifyId?(f(),u("div",{key:0,class:"staff-details-info to-banding-tel",onClick:t[0]||(t[0]=A=>a(b)("BindingTel"))},l(y.value?"":"绑定手机"),1)):(f(),u("div",he,l(y.value?"":"未绑定"),1))],64))]),_:1},8,["label"]),o(d,{label:a(i)("base.birthdayTxt")},{default:s(()=>[n("div",ge,l(e.birthday),1)]),_:1},8,["label"]),g.value===2?(f(),k(d,{key:0,label:"状态"},{default:s(()=>[pe]),_:1})):p("",!0),o(d,{label:a(i)("base.entryTime")},{default:s(()=>[n("div",ye,l(a(G)(e.joinTime*1e3).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),r.value&&r.value==="other"&&g.value!==2?(f(),k(d,{key:1,label:a(i)("base.staffQuitTxt"),isHaveRArrow:!0,onOnHandle:R},null,8,["label"])):p("",!0)]),Ie,r.value==="other"&&g.value!==2?(f(),u("div",ke,[o(M,{firBtnTxt:a(i)("base.btn.editInfo"),secBtnTxt:a(H)===3?"划拨/收回备用金":"发放/收回备用金",onOnFirBtnHandle:j,onOnSecBtnHandle:U},null,8,["firBtnTxt","secBtnTxt"])])):p("",!0),r.value==="staff"?(f(),u("div",xe,[o(M,{firBtnTxt:"修改密码",secBtnTxt:"编辑资料",onOnFirBtnHandle:t[1]||(t[1]=A=>a(b)("UpdatePwd")),onOnSecBtnHandle:D})])):p("",!0)]),o(L,{ref_key:"confirmPopRef",ref:T,popClass:"staff-details-dialog-box",customFooter:!0,onOnConfirm:O},{default:s(()=>[n("div",Te,[n("div",Be,[le(l(a(i)("base.confirmDelStaff"))+" ",1),Se])])]),_:1},512),o(de,{ref_key:"imprestSheetRef",ref:S,onOnChange:V},null,512),o($,{ref_key:"previewImgRef",ref:B,imageList:[a(J)+e.avatar]},null,8,["imageList"])]),_:1})}}});export{Ue as default};
