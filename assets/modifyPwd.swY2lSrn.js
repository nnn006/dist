import{o as P,y as B,b as A,c as F,q as I,t as h,d as R,g as U}from"./index.Cjri3_sP.js";import{d as H,l as x,m as k,g as q,k as z,o as f,a as p,B as c,x as e,i as t,S as u,H as g,L as C,Q as E,r as w}from"./vue.BCHSKM6y.js";const L={class:"register-box modify-pwd-box"},M={class:"reg-form-box"},Q={class:"reg-form-item hk-flex hk-items-center"},$={class:"reg-area-span"},j={class:"reg-field-box"},G={class:"reg-form-item rf-mt-24 hk-flex hk-items-center"},J={class:"reg-field-box"},X=H({__name:"modifyPwd",setup(K){const{t:n}=A();let a=null;const{pushName:V}=F(),{hkMessage:i}=U(),v=x(null),o=k({account:"",verCode:""}),D=q(()=>!!o.account&&!!o.verCode),m=x(86),s=k({isCountdown:!1,countdownNum:60}),S=()=>{v.value.taggleVisible(!0)},b=P(()=>{if(!o.account){i("请填写手机号码");return}s.isCountdown||(s.isCountdown=!0,I({phone:"+"+m.value+o.account}).then(d=>{d.code===0?_():i(d.msg)}).catch(d=>{i(d)}))},500),_=()=>{a=setTimeout(()=>{s.countdownNum>=1?(s.countdownNum--,_()):(s.isCountdown=!1,s.countdownNum=60,clearTimeout(a),a=null)},1e3)},y=()=>{V("SetPwd",{tel:"+"+m.value+o.account,code:o.verCode,type:2})};return z(()=>{a&&(clearTimeout(a),a=null)}),(d,l)=>{const T=w("SvgIcon"),N=w("AreaCodeSelect");return f(),p(g,null,[c(B,{class:"login-module-header",title:e(n)("base.header.findPwd"),comebackColor:"#0D0D0D"},null,8,["title"]),t("div",L,[t("div",M,[t("div",Q,[t("div",{class:"reg-area hk-flex hk-items-center",onClick:S},[t("span",$,"+"+u(m.value),1),c(T,{iconClass:"down-select-svg",size:"9",color:"#0D0D0D"})]),t("div",j,[c(e(h),{modelValue:o.account,"onUpdate:modelValue":l[0]||(l[0]=r=>o.account=r),placeholder:e(n)("base.regTelPldtxt"),clearable:"","clear-icon":"cross"},null,8,["modelValue","placeholder"])])]),t("div",G,[t("div",J,[c(e(h),{modelValue:o.verCode,"onUpdate:modelValue":l[1]||(l[1]=r=>o.verCode=r),placeholder:e(n)("base.regVerCodePldtxt"),clearable:"","clear-icon":"cross"},null,8,["modelValue","placeholder"])]),t("div",{class:"get-vcode-box",onClick:l[2]||(l[2]=(...r)=>e(b)&&e(b)(...r))},[s.isCountdown?(f(),p(g,{key:0},[C(u(s.countdownNum)+" ",1),t("span",null,u(e(n)("base.vCodeSendTxt")),1)],64)):(f(),p(g,{key:1},[C(u(e(n)("base.getVcodeTxt")),1)],64))])])]),c(e(R),{class:"reg-step-btn",disabled:!D.value,type:"primary",onClick:y},{default:E(()=>[C(u(e(n)("base.checkingTxt")),1)]),_:1},8,["disabled"])]),c(N,{ref_key:"areaCodeSelectRef",ref:v},null,512)],64)}}});export{X as default};
