import{_ as w}from"./right-arrow-icon.CaFxgYzl.js";import{I as z,u as E,o as J,b as K,c as Q,H as G,J as W,U as X,t as V,d as Z,g as ee,K as se}from"./index.Cjri3_sP.js";import{d as te,l as u,m as ae,g as oe,o as m,a as S,i as e,S as i,x as s,e as F,Q as b,f as v,L as f,B as d,h as B,H as le,r as g}from"./vue.BCHSKM6y.js";const ie={class:"set-info-header"},ne={class:"set-info-box"},de={class:"si-upload-box hk-flex"},ce={class:"si-preview-delete"},re={class:"si-upload-def"},ue={class:"si-upload-add hk-flex hk-items-center"},me={class:"si-upload-txt"},fe={class:"si-form-box"},he={class:"form-item-pop"},pe={class:"fitem-label"},_e=e("span",{class:"setinfo-item-require"},"*",-1),be={class:"fitem-input"},ve=e("div",{class:"form-item-auxbox"},null,-1),ge={class:"form-item-pop"},ye={class:"fitem-label"},xe=e("span",{class:"setinfo-item-require"},"*",-1),ke={class:"fitem-input"},Ie=e("img",{class:"si-birthday-right-arrow",src:w},null,-1),De=e("div",{class:"form-item-auxbox"},null,-1),Ce={class:"form-item-pop"},Ve={class:"fitem-label"},Se=e("span",{class:"setinfo-item-require"},"*",-1),Fe={class:"fitem-input"},Be=e("img",{class:"si-birthday-right-arrow",src:w},null,-1),we=e("div",{class:"form-item-auxbox"},null,-1),Te={class:"form-item-pop"},Ue={class:"fitem-label"},Ae={class:"fitem-input"},Ne={key:0,class:"btm-auth-box"},$e=te({__name:"setInfo",setup(He){const{t:l}=K(),h=z.inApp(),c=u([]),y=u(null),x=u(null),p=new Date,T=p.getFullYear(),U=p.getMonth(),A=p.getDate(),r=u(!1),k=u(!1),{pushName:N}=Q(),{hkMessage:_}=ee(),I=E(),a=ae({name:"",birthday:"",area:"中国",areaId:1,idCard:""}),H=oe(()=>!!a.area&&!!a.birthday&&!!a.name),L=o=>{a.area=o.countryName,a.areaId=o.countryId},P=o=>{a.birthday=`${o[0]}-${o[1]}-${o[2]}`},R=()=>{y.value.taggleVisible()},$=()=>{x.value.taggleVisible(!0)},D=o=>{se({identifyId:I.userInfo.identifyId,nickname:a.name,avatar:o,birthday:a.birthday,identifyMsgId:a.idCard,countryId:a.areaId}).then(async t=>{t.code===0?(await I.setUserIdent(),sessionStorage.clear(),N("Home")):_(t.msg)}).finally(()=>{r.value=!1})},M=o=>{c.value=o},C=o=>{console.log("---val--"),k.value=o},q=J(()=>{if(!r.value)if(r.value=!0,c.value.length>0){const o=new FormData;o.append("file",c.value[0].file),G(o).then(t=>{t.code===0?D(t.data.path):_(t.msg)}).catch(t=>{r.value=!1,_(t)})}else D("")},400);return(o,t)=>{const O=g("AppUploadHead"),j=g("DateSelect"),Y=g("AreaSelect");return m(),S(le,null,[e("div",ie,i(s(l)("base.header.setInfo")),1),e("div",ne,[e("div",de,[s(h)?v("",!0):(m(),F(s(X),{key:0,reupload:"","max-count":"1",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n)},{"preview-delete":b(()=>[e("div",ce,[d(s(W),{name:"cross",color:"#fff"})])]),default:b(()=>[e("div",re,[e("div",ue,[e("div",me,i(s(l)("base.uploadImgTips")),1)])])]),_:1},8,["modelValue"])),s(h)?(m(),F(O,{key:1,onOnChangeImg:M})):v("",!0)]),e("div",fe,[e("div",he,[e("div",pe,[f(i(s(l)("base.nameTxt")),1),_e]),e("div",be,[d(s(V),{modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=n=>a.name=n),placeholder:s(l)("base.namePldTxt"),clearable:"","clear-icon":"cross"},null,8,["modelValue","placeholder"])])]),ve,e("div",ge,[e("div",ye,[f(i(s(l)("base.nationTxt")),1),xe]),e("div",ke,[e("div",{class:"si-birthday-form hk-flex hk-jbetween hk-items-center",onClick:$},[e("span",{class:"si-birthday-label",style:B({color:a.area?"#0D0D0D":"#BFBFBF"})},i(a.area||s(l)("base.selNationPld")),5),Ie])])]),De,e("div",Ce,[e("div",Ve,[f(i(s(l)("base.birthdayTxt")),1),Se]),e("div",Fe,[e("div",{class:"si-birthday-form hk-flex hk-jbetween hk-items-center",onClick:R},[e("span",{class:"si-birthday-label",style:B({color:a.birthday?"#0D0D0D":"#BFBFBF"})},i(a.birthday||s(l)("base.birthdayPldTxt")),5),Be])])]),we,e("div",Te,[e("div",Ue,i(s(l)("base.idCard")),1),e("div",Ae,[d(s(V),{modelValue:a.idCard,"onUpdate:modelValue":t[2]||(t[2]=n=>a.idCard=n),placeholder:s(l)("base.idCardPldTxt"),clearable:"","clear-icon":"cross",onFocus:t[3]||(t[3]=n=>C(!0)),onBlur:t[4]||(t[4]=n=>C(!1))},null,8,["modelValue","placeholder"])])])]),d(s(Z),{class:"si-btm-btn",type:"primary",disabled:!H.value,loading:r.value,onClick:s(q)},{default:b(()=>[f(i(s(l)("base.goAppTxt")),1)]),_:1},8,["disabled","loading","onClick"])]),s(h)&&k.value?(m(),S("div",Ne)):v("",!0),d(j,{ref_key:"dateSelectRef",ref:y,maxLimit:new Date(s(T),s(U),s(A)),onOnChangeVal:P},null,8,["maxLimit"]),d(Y,{ref_key:"areaSelectRef",ref:x,title:s(l)("base.countryTxt"),onOnChange:L},null,8,["title"])],64)}}});export{$e as default};
