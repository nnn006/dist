import{_ as S}from"./right-arrow-icon.CaFxgYzl.js";import{s as R,q as H,j as A,m as D,k,u as I,l as N,a as O}from"./index.C__3lhMr.js";import{l as B,r as o,R as J,d as q,K as d,L as z,U,V as m,N as a,k as i,z as x,O as y}from"./vue.C2TeXnf4.js";const F=a("div",{class:"aux-box-4px"},null,-1),G={class:"staff-add-content hk-pt-noScreen"},K={class:"add-member-screen-box"},$=a("div",{class:"ambs-l"},"选择家庭",-1),E={class:"ambs-r hk-flex hk-items-center"},Q=a("img",{style:{"margin-left":"6px"},class:"input-right-arrow",src:S},null,-1),W=a("div",{class:"ambs-l"},"选择职务",-1),X={class:"ambs-r hk-flex hk-items-center"},Y=a("img",{style:{"margin-left":"6px"},class:"input-right-arrow",src:S},null,-1),se=B({__name:"add",setup(Z){const{t:h}=I(),{hkMessage:p}=O(),{getJobType:_}=R();H();const f=A(),{auth:C}=D(),b=o(null),j=J(),l=o(""),g=o(null),r=o([{text:h("base.selectFamilyTxt"),value:0}]),u=o([{text:h("base.jopTxt"),value:0}]),n=o({text:"职务",value:0}),t=o({text:"家庭",value:0}),w=async e=>{t.value=e[0],l.value="",n.value={text:"职务",value:0};const s=await _(t.value.value);u.value=s},P=e=>{var s;n.value=e[0],t.value.value&&((s=e[0])!=null&&s.value)?T():l.value=""},T=()=>{N({identifyType:4,dutiesId:n.value.value,homeIds:[t.value.value]}).then(e=>{e.code===0?l.value=e.data.shareCode:p(e.msg)})},V=()=>{if(!t.value.value){p("请选择家庭");return}g.value.taggleVisible(!0)},L=()=>{b.value.taggleVisible(!0)};return q(async()=>{await f.setHomeSimpleLs();const e=await f.homeSimple;if(C===3)r.value=e,t.value=e[0];else{r.value=e;const{homeId:s}=j.query;if(s){const c=e.filter(v=>v.value===Number(s));c.length&&(t.value=c[0])}}if(t.value.value){const s=await _(t.value.value);u.value=s}}),(e,s)=>{const c=d("SecondHeader"),v=d("AddMember"),M=d("MainContainer");return z(),U(M,null,{headerScreen:m(()=>[a("div",null,[F,i(c,{noScreen:!0})])]),default:m(()=>[a("div",G,[i(v,{inviteLink:l.value,tips:"请先选择家和职务~",typ:4},{default:m(()=>[a("div",K,[a("div",{class:"add-member-screen hk-flex hk-jbetween hk-items-center",onClick:L},[$,a("div",E,[a("div",{class:x(["ambs-r-label",{"no-screen":t.value.value===0}])},y(t.value.text),3),Q])]),a("div",{class:"add-member-screen hk-flex hk-jbetween hk-items-center",onClick:V},[W,a("div",X,[a("div",{class:x(["ambs-r-label",{"no-screen":n.value.value===0}])},y(n.value.text),3),Y])])])]),_:1},8,["inviteLink"])]),i(k,{ref_key:"homeTypePopRef",ref:b,title:"选择家庭",data:r.value,onOnChange:w},null,8,["data"]),i(k,{ref_key:"jopPopoverRef",ref:g,title:"职务",data:u.value,onOnChange:P},null,8,["data"])]),_:1})}}});export{se as default};
