import{j as ee,d as te,m as ae,f as le,A as se,F as N,t as oe,u as ne,S as ie,a as de}from"./index.C__3lhMr.js";import{_ as d}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.MpSsZcmr.js";import{l as ue,r as f,i as ce,R as re,a as pe,d as fe,K as x,L as a,U as c,V as m,k as n,N as l,u as e,O as y,S as s,M as r,F as me,Q as ve}from"./vue.C2TeXnf4.js";import{u as ye}from"./usePayDetails.Cy6__Q0s.js";import{e as ge,f as _e}from"./index.CeJqzCj5.js";import"./right-arrow-icon.CaFxgYzl.js";const be={class:"pay-details-box container-setPx"},he={class:"pydtl-val-item",style:{"font-weight":"500"}},Te={class:"pydtl-val-item"},ke={key:10,class:"pydtl-info-item"},De={class:"pydtl-info-title"},xe={class:"pydtl-info-desc"},Be={key:11,class:"pydtl-info-item"},Ce=l("div",{class:"pydtl-info-title"},"驳回原因",-1),Ie={class:"pydtl-info-desc"},Pe={key:12,class:"mpicture-info-item"},Re=l("div",{class:"mpicture-info-title"},"照片",-1),$e={class:"mpicture-info-img hk-flex"},je=["src","onClick"],He={key:13,class:"footer-aux-btmbox"},Fe={key:14,class:"footer-btn-box"},Oe={key:15,class:"footer-btn-box"},we={key:16,class:"footer-btn-box"},Se={key:17,class:"footer-btn-box"},Ae={key:18,class:"footer-btn-box"},Ve={class:"pay-details-dialog"},Le={class:"pd-dialog-content"},Ne={class:"pd-reject-box"},Me={class:"pd-reject-header"},Ue={class:"pd-reject-content"},ze=l("div",{class:"short-tips-dialog"},[l("div",{class:"pd-dialog-content"}," 是否确定取消驳回？ ")],-1),Ee=l("div",{class:"short-tips-dialog"},[l("div",{class:"pd-dialog-content"},"确定删除该条记录")],-1),qe=l("div",{class:"short-tips-dialog"},[l("div",{class:"pd-dialog-content"},"确定作废该条记录")],-1),et=ue({__name:"index",setup(Ke){const B=f(null),O=f(null),I=f(null),P=f(null),R=f(null),M=ee(),h=f(!1),$=f(!1),j=f(!1),w=f(null),U=ce("endPageLoading"),{comeback:H,pushName:S}=te(),z=re(),{hkMessage:g}=de(),{id:T}=z.query,{auth:_}=ae(),{applyInfo:t,getApplyDetails:A}=ye(),C=f(""),E={1:"wait",2:"pass",3:"bohui",4:"stfWaitUpd",6:"zuofei"},i=pe(()=>!(t.typ!==2&&t.typ!==3)),{t:p}=ne(),q=()=>{P.value.taggleDialog(!0)},K=()=>{R.value.taggleDialog(!0)},Q=()=>{I.value.taggleDialog(!0)},W=()=>{B.value.taggleDialog(!0)},V=()=>{O.value.taggleDialog(!0)},G=u=>{$.value=!0,ge({applicationId:T,homeId:t.homeId}).then(o=>{o.code===0?(H(),g("删除成功"),B.value.taggleDialog(!1)):g(o.msg)}).finally(()=>{$.value=!1})},J=()=>{j.value=!0,_e({applicationId:T}).then(u=>{u.code===0?(H(),g("作废成功"),I.value.taggleDialog(!1)):g(u.msg)}).finally(()=>{j.value=!1})},F=(u,o)=>{const b={applicationId:T,status:u};u===3&&(b.reason=C.value),h.value=!0,ie(b).then(k=>{k.code===0?(A(),C.value="",g(o?"取消驳回成功":u===3?"驳回成功":"审核成功"),R.value.taggleDialog(!1),P.value.taggleDialog(!1),B.value.taggleDialog(!1),u===2&&!o&&H()):g(k.msg)}).finally(()=>{h.value=!1})},X=u=>{w.value.taggleModal(u)};return fe(async()=>{A({doFun:U})}),(u,o)=>{const b=x("BaseHandleBtn"),k=x("BtmSingleBtn"),D=x("ConfrimPopAgain"),Y=x("PreviewImage"),Z=x("MainContainer");return a(),c(Z,null,{header:m(()=>[n(le,{title:i.value?"出车详情":"支出详情"},null,8,["title"])]),default:m(()=>[l("div",be,[n(d,{label:e(p)("base.nameTxt"),valData:e(t).name},null,8,["label","valData"]),i.value?s("",!0):(a(),c(d,{key:0,label:e(p)("base.payMoneyTxt")},{default:m(()=>[l("div",he,y(e(se)(e(t).price.value))+" "+y(e(t).currency),1)]),_:1},8,["label"])),i.value?(a(),c(d,{key:1,label:e(p)("homeItem.address"),valData:e(t).address},null,8,["label","valData"])):s("",!0),i.value?(a(),c(d,{key:2,label:e(p)("homeItem.carTime"),valData:e(t).carTime},null,8,["label","valData"])):s("",!0),n(d,{label:e(p)("base.belongHomeTxt"),valData:e(t).homeName},null,8,["label","valData"]),i.value?s("",!0):(a(),c(d,{key:3,label:e(p)("base.gasTypeTxt"),valData:e(t).feeType},null,8,["label","valData"])),i.value?(a(),c(d,{key:4,label:e(p)("base.consignerTxt"),valData:e(t).client},null,8,["label","valData"])):s("",!0),i.value?(a(),c(d,{key:5,label:"开始出车",valData:{value:e(t).startTime,type:"dayjs"}},null,8,["valData"])):s("",!0),i.value?(a(),c(d,{key:6,label:"结束出车",valData:{value:e(t).endTime,type:"dayjs"}},null,8,["valData"])):s("",!0),i.value?s("",!0):(a(),c(d,{key:7,label:e(p)("base.payTimeTxt"),valData:e(t).time},null,8,["label","valData"])),e(t).status!==1?(a(),c(d,{key:8,label:e(p)("base.reviewerTxt")},{default:m(()=>[l("div",Te,y(e(t).auditIdentifyName),1)]),_:1},8,["label"])):s("",!0),[1,2,3,4,6].includes(e(t).status)?(a(),c(d,{key:9,label:"状态",isStatusItem:!0,statusValue:E[e(t).status]},null,8,["statusValue"])):s("",!0),!i.value&&e(t).desc?(a(),r("div",ke,[l("div",De,y(e(p)("base.descTxt")),1),l("div",xe,y(e(t).desc),1)])):s("",!0),e(t).status===3||e(t).status===4?(a(),r("div",Be,[Ce,l("div",Ie,y(e(t).reason),1)])):s("",!0),i.value?s("",!0):(a(),r("div",Pe,[Re,l("div",$e,[(a(!0),r(me,null,ve(e(t).photo,(v,L)=>(a(),r("img",{key:L,src:v,onClick:Qe=>X(L)},null,8,je))),128))])])),[1,3,4].includes(e(t).status)||[1].includes(e(t).identifyType)&&e(t).identifyType===e(_)||[2,3].includes(e(t).identifyType)&&e(t).identifyType===e(_)&&(e(t).status===1||e(t).status===4)||e(t).status===2&&[1,2].includes(e(_))&&![1,2].includes(e(t).identifyType)?(a(),r("div",He)):s("",!0),(e(t).status===1||e(t).status===4)&&!(e(M).userInfo.identifyId===e(t).identifyId&&e(_)===3)?(a(),r("div",Fe,[n(b,{firBtnTxt:"驳回修改",secBtnTxt:"审核通过",onOnFirBtnHandle:q,onOnSecBtnHandle:W})])):s("",!0),e(t).status===3?(a(),r("div",Oe,[n(k,{disable:!0,handleTxt:"取消驳回",onOnHandle:K})])):s("",!0),[2,3].includes(e(t).identifyType)&&e(t).identifyType===e(_)&&(e(t).status===1||e(t).status===4)?(a(),r("div",we,[n(b,{firBtnTxt:"删除记录",secBtnTxt:"修改记录",onOnFirBtnHandle:V,onOnSecBtnHandle:o[0]||(o[0]=v=>e(S)("BossRecordEdit",{id:e(T),homeId:e(t).homeId}))})])):s("",!0),[1].includes(e(t).identifyType)&&e(t).identifyType===e(_)?(a(),r("div",Se,[n(b,{firBtnTxt:"删除记录",secBtnTxt:"修改记录",onOnFirBtnHandle:V,onOnSecBtnHandle:o[1]||(o[1]=v=>e(S)("BossRecordEdit",{id:e(T),homeId:e(t).homeId}))})])):s("",!0),e(t).status===2&&[1,2].includes(e(_))&&![1,2].includes(e(t).identifyType)?(a(),r("div",Ae,[n(k,{class:"zuofei-btn",disable:!0,handleTxt:"作废",onOnHandle:Q})])):s("",!0)]),n(D,{ref_key:"confirmPopRef",ref:B,popClass:"pay-details-dialog-box",loading:h.value,customFooter:!0,onOnConfirm:o[2]||(o[2]=v=>F(2))},{default:m(()=>[l("div",Ve,[l("div",Le,y(i.value?`审核通过“${e(t).name.value}”出车${e(N)(e(t).carTime.value)}`:`审核通过“${e(t).name.value}”${e(t).feeType.value}支出${e(t).price.value+" "+e(t).currency}`),1)])]),_:1},8,["loading"]),n(D,{ref_key:"rejectPopRef",ref:P,popClass:"pay-details-reject-dialog",loading:h.value,onOnConfirm:o[4]||(o[4]=v=>F(3))},{default:m(()=>[l("div",Ne,[l("div",Me,y(i.value?`驳回“${e(t).name.value}”出车${e(N)(e(t).carTime.value)}`:`驳回“${e(t).name.value}”${e(t).feeType.value}支出${e(t).price.value+" "+e(t).currency}`),1),l("div",Ue,[n(e(oe),{class:"pd-pz-field",rows:"4",placeholder:"批注:",modelValue:C.value,"onUpdate:modelValue":o[3]||(o[3]=v=>C.value=v),type:"textarea"},null,8,["modelValue"])])])]),_:1},8,["loading"]),n(D,{ref_key:"cancelRejectRef",ref:R,popClass:"short-tips-pop",loading:h.value,customFooter:!0,onOnConfirm:o[5]||(o[5]=v=>F(2,!0))},{default:m(()=>[ze]),_:1},8,["loading"]),n(D,{ref_key:"confirmDelPopRef",ref:O,popClass:"short-tips-pop",loading:$.value,customFooter:!0,onOnConfirm:G},{default:m(()=>[Ee]),_:1},8,["loading"]),n(D,{ref_key:"confirmCelPopRef",ref:I,popClass:"short-tips-pop",loading:j.value,customFooter:!0,onOnConfirm:J},{default:m(()=>[qe]),_:1},8,["loading"]),n(Y,{ref_key:"previewImgRef",ref:w,imageList:e(t).photo},null,8,["imageList"])]),_:1})}}});export{et as default};
