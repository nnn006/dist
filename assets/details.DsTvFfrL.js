import{h as D,y as L,b as O,c as V,aA as Y,aB as A,d as E,a6 as F,e as v,g as $}from"./index.Cjri3_sP.js";import{d as q,l as _,m as Q,p as z,o as U,a as G,B as s,Q as i,x as e,i as a,S as c,H as J,_ as K,j as W,r as u,L as y}from"./vue.BCHSKM6y.js";import{_ as d}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.DMYgpoJW.js";import{_ as X}from"./imprestSheet.vue_vue_type_script_setup_true_name_imprest-sheet_lang.CulFR8TF.js";import"./right-arrow-icon.CaFxgYzl.js";import"./index.YYOoEeNT.js";const Z={class:"add-home-box hk-flex hk-flex-col container-setPx"},tt={class:"add-home-form"},et={class:"staff-details-info"},at=a("div",{class:"staff-details-info"},"管家",-1),ot={class:"staff-details-info"},st={class:"staff-details-info"},nt={class:"staff-details-info"},it={class:"staff-details-info"},lt={class:"staff-details-info"},ct={class:"staff-details-info"},dt={class:"staff-info-item"},ft={class:"staff-info-title"},rt=["src"],mt=a("div",{class:"footer-aux-btmbox"},null,-1),_t={class:"footer-btn-box"},ut={class:"staff-details-dialog"},bt={class:"pd-dialog-content"},ht=a("p",null,"提示：请勿忘记线下收回备用金",-1),kt=q({__name:"details",setup(gt){const{t:n}=O(),I=K(),{id:f,homeId:r}=I.query,{hkMessage:m}=$(),x=W("endPageLoading"),{auth:T}=D(),{pushName:b,comeback:k}=V(),h=_(null),g=_(null),p=_(null),t=Q({nickname:"",avatar:"",homeName:"",birthday:"",contactInformation:"",identifyMsgId:"",duties:"",country:"",joinTime:0,countryId:0,currency:""}),B=l=>{Y({identifyId:+f}).then(o=>{o.code===0?(t.avatar=o.data.avatar,t.nickname=o.data.nickname,t.homeName=o.data.homeName,t.birthday=o.data.birthday,t.contactInformation=o.data.contactInformation,t.identifyMsgId=o.data.identifyMsgId,t.country=o.data.country,t.duties=o.data.duties,t.joinTime=o.data.joinTime,t.countryId=o.data.countryId,t.currency=o.data.currency):m(o.msg)}).finally(()=>{l&&l()})},C=()=>{h.value.taggleDialog(!0)},M=()=>{A({identifyId:+f,homeId:+r}).then(l=>{l.code===0?k():m(l.msg)}).catch(l=>{m(l)})},P=()=>{b("HkEdit",{id:f,homeId:r})},H=()=>{p.value.taggleSheetVisible(!0)},N=l=>{b("ImpOperation",{id:f,homeId:r,currency:t.currency,doType:l.value})},j=()=>{g.value.taggleModal()};return z(()=>{B(x)}),(l,o)=>{const w=u("BaseHandleBtn"),R=u("ConfrimPopAgain"),S=u("PreviewImage");return U(),G(J,null,[s(L,{title:e(n)("base.staffInfoTxt")},{rightContent:i(()=>[s(e(E),{size:"mini",class:"staff-quit-btn",onClick:C},{default:i(()=>[y(c(e(n)("base.staffQuitTxt")),1)]),_:1})]),_:1},8,["title"]),a("div",Z,[a("div",tt,[s(d,{label:e(n)("base.nameTxt")},{default:i(()=>[a("div",et,c(t.nickname),1)]),_:1},8,["label"]),s(d,{label:e(n)("base.jopTxt")},{default:i(()=>[at]),_:1},8,["label"]),s(d,{label:e(n)("base.belongHomeTxt")},{default:i(()=>[a("div",ot,c(t.homeName),1)]),_:1},8,["label"]),s(d,{label:e(n)("base.nationTxt")},{default:i(()=>[a("div",st,c(t.country),1)]),_:1},8,["label"]),s(d,{label:e(n)("base.idCard")},{default:i(()=>[a("div",nt,c(t.identifyMsgId),1)]),_:1},8,["label"]),s(d,{label:e(n)("base.telNotxt")},{default:i(()=>[a("div",it,c(t.contactInformation),1)]),_:1},8,["label"]),s(d,{label:e(n)("base.birthdayTxt")},{default:i(()=>[a("div",lt,c(t.birthday),1)]),_:1},8,["label"]),s(d,{label:e(n)("base.entryTime")},{default:i(()=>[a("div",ct,c(e(F)(t.joinTime*1e3).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),a("div",dt,[a("div",ft,c(e(n)("base.pictrueTxt")),1),a("img",{class:"staff-info-img",src:e(v)+t.avatar,onClick:j},null,8,rt)])]),mt,a("div",_t,[s(w,{firBtnTxt:e(n)("base.btn.editInfo"),secBtnTxt:e(T)===3?"划拨/收回备用金":"发放/收回备用金",onOnFirBtnHandle:P,onOnSecBtnHandle:H},null,8,["firBtnTxt","secBtnTxt"])])]),s(R,{ref_key:"confirmPopRef",ref:h,popClass:"staff-details-dialog-box",customFooter:!0,onOnConfirm:M},{default:i(()=>[a("div",ut,[a("div",bt,[y(c(e(n)("base.confirmDelStaff"))+" ",1),ht])])]),_:1},512),s(X,{ref_key:"imprestSheetRef",ref:p,onOnChange:N},null,512),s(S,{ref_key:"previewImgRef",ref:g,imageList:[e(v)+t.avatar]},null,8,["imageList"])],64)}}});export{kt as default};
