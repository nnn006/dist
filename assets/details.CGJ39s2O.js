import{y as R,b as H,R as A,a2 as I,Q as F,j as S,g as O}from"./index.Cjri3_sP.js";import{d as V,l as D,m as $,g as L,p as E,o as i,a as p,B as n,Q as v,x as s,i as a,e as k,f as r,S as l,H as M,_ as Q,j as q,r as j,L as u}from"./vue.BCHSKM6y.js";import{_ as c}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.DMYgpoJW.js";import"./right-arrow-icon.CaFxgYzl.js";const z=["src"],G={class:"imprest-details-box container-setPx"},J={style:{"font-weight":"500"}},K={key:2,class:"imprest-info-item"},U={class:"imprest-info-title"},W={class:"imprest-info-desc"},X={key:3,class:"footer-aux-btmbox"},Y={key:4,class:"footer-btn-box"},Z={class:"imprest-details-dialog"},ee={class:"pd-dialog-content"},te=a("br",null,null,-1),ae={class:"hk-fw-500"},se={class:"imprest-details-dialog"},le={class:"pd-dialog-content"},oe=a("br",null,null,-1),ne={class:"hk-fw-500"},pe=V({__name:"details",setup(ie){const _=D(null),f=D(null),B=Q(),{hkMessage:y}=O(),C=q("endPageLoading"),{id:g}=B.query,e=$({name:{type:"text",value:""},price:{type:"number",value:0},homeName:{type:"text",value:""},job:{type:"text",value:""},time:{type:"dayjs",value:0},audRes:{type:"text",value:""},reviewer:{type:"text",value:""},desc:"",currency:"",status:0}),m=L(()=>e.status!==1),{t:o}=H(),T=()=>{f.value.taggleDialog(!0)},b=d=>{A({applicationId:g}).then(t=>{t.code===0?(e.name={type:"text",value:t.data.identifyName},e.price={type:"number",value:t.data.amount},e.homeName={type:"text",value:t.data.homeName},e.job={type:"text",value:t.data.identifyDuties},e.time={type:"dayjs",value:t.data.applicationTime},e.audRes={type:"text",value:t.data.status===1?"待审核":t.data.status===2?"通过":"拒绝"},e.reviewer={type:"text",value:t.data.auditIdentifyName},e.desc=t.data.remark,e.currency=t.data.currency,e.status=t.data.status):y(t.msg)}).finally(()=>{d&&d()})},N=()=>{_.value.taggleDialog(!0)},x=d=>{I({applicationId:g,status:d}).then(t=>{t.code===0?(b(),f.value.taggleDialog(!1),_.value.taggleDialog(!1)):y(t.msg)}).catch(t=>{y(t)})};return E(()=>{b(C)}),(d,t)=>{const P=j("BaseHandleBtn"),h=j("ConfrimPopAgain");return i(),p(M,null,[n(R,{title:s(o)("base.header.impExamine")},{rightContent:v(()=>[e.status===1?(i(),p("img",{key:0,class:"imprest-header-staimg",src:s(F)("wait"),alt:""},null,8,z)):r("",!0)]),_:1},8,["title"]),a("div",G,[n(c,{label:"申请人",valData:e.name},null,8,["valData"]),n(c,{label:"申请金额"},{default:v(()=>[a("div",J,l(s(S)(e.price.value))+" "+l(e.currency),1)]),_:1}),n(c,{label:s(o)("base.belongHomeTxt"),valData:e.homeName},null,8,["label","valData"]),n(c,{label:s(o)("base.jopTxt"),valData:e.job},null,8,["label","valData"]),n(c,{label:s(o)("base.timeTxt"),valData:e.time},null,8,["label","valData"]),m.value?(i(),k(c,{key:0,label:s(o)("base.audResTxt"),valData:e.audRes,valClass:["hk-fw-500",e.status===2?"val-main-color":"val-reject-color"]},null,8,["label","valData","valClass"])):r("",!0),m.value?(i(),k(c,{key:1,label:s(o)("base.reviewerTxt"),valData:e.reviewer},null,8,["label","valData"])):r("",!0),e.desc?(i(),p("div",K,[a("div",U,l(s(o)("base.descTxt")),1),a("div",W,l(e.desc),1)])):r("",!0),!m.value&&e.status!==0?(i(),p("div",X)):r("",!0),!m.value&&e.status!==0?(i(),p("div",Y,[n(P,{firBtnTxt:s(o)("base.btn.reject"),secBtnTxt:s(o)("base.btn.agree"),onOnFirBtnHandle:T,onOnSecBtnHandle:N},null,8,["firBtnTxt","secBtnTxt"])])):r("",!0)]),n(h,{ref_key:"confirmPopRef",ref:_,popClass:"imprest-details-dialog-box",customFooter:!0,onOnConfirm:t[0]||(t[0]=w=>x(2))},{default:v(()=>[a("div",Z,[a("div",ee,[u("确定同意“"+l(e.name.value)+"”",1),te,u(" 预支"),a("span",ae,l(e.price.value),1),u(" "+l(e.currency)+"？",1)])])]),_:1},512),n(h,{ref_key:"rejectPopRef",ref:f,popClass:"imprest-details-reject-dialog",customFooter:!0,onOnConfirm:t[1]||(t[1]=w=>x(3))},{default:v(()=>[a("div",se,[a("div",le,[u("确定拒绝“"+l(e.name.value)+"”",1),oe,u(" 预支"),a("span",ne,l(e.price.value),1),u(" "+l(e.currency)+"？",1)])])]),_:1},512)],64)}}});export{pe as default};
