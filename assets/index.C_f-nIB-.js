import{a3 as L,y as V,b as w,c as H,aQ as $,aR as j,aH as E,aI as F,g as J,aS as Q}from"./index.Cjri3_sP.js";import{_ as q}from"./manageItem.vue_vue_type_style_index_0_lang.PpIakLvA.js";import{d as z,l as r,p as U,o as d,a as g,B as f,Q as _,x as v,i as l,H as D,R as G,e as K,f as W,q as X,r as h,S as P,L as N}from"./vue.BCHSKM6y.js";const Y={class:"smh-mr-5"},Z=l("img",{class:"drap-icon",src:F,alt:""},null,-1),ee={class:"tips-details-dialog"},ae={class:"tips-dialog-content"},te=l("br",null,null,-1),ce=z({__name:"index",setup(se){const{t:C}=w(),m=r(null),{pushName:k}=H(),{hkMessage:c}=J(),R=L(),p=r(!1),t=r([]),u=r(null),b=r(null),A=e=>{var a;u.value=e,(a=m.value)==null||a.taggleDialog(!0)},y=()=>{u.value=null},M=()=>{$({id:u.value.value}).then(e=>{var a;e.code===0?((a=m.value)==null||a.taggleDialog(!1),c("删除成功"),S(),y(),R.setCostType()):c(e.msg)}).catch(e=>{c(e)})},O=e=>{k("CostAdd",{title:e.label,id:e.value})},S=e=>{p.value=!0,j().then(a=>{if(a.code===0){const s=a.data.list.map(n=>({label:n.title,value:n.id}));t.value=s,e&&e()}else c(a.msg)}).finally(()=>{p.value=!1})},T=(e,a,s)=>{Q({tranId:t.value[s].value,index:a+1}).then(n=>{if(n.code===0){const i=JSON.parse(JSON.stringify(t.value)),o=i.splice(s,1)[0],B=i.slice(0,s),I=i.slice(s),x=[...B,...I];x.splice(a,0,o),t.value=x}else c(n.msg)})};return U(()=>{S(()=>{E(b.value,t.value,{handle:".drap-icon",onUpdate:e=>{T(t.value,e.newIndex,e.oldIndex),X(()=>{})}})})}),(e,a)=>{const s=h("SvgIcon"),n=h("hk-empty"),i=h("ConfrimPopAgain");return d(),g(D,null,[f(V,{title:v(C)("base.header.costManage")},{rightContent:_(()=>[l("div",{class:"staff-manage-header-btn hk-flex hk-items-center",onClick:a[0]||(a[0]=o=>v(k)("CostAdd"))},[l("span",Y,P(v(C)("base.addCostTpTxt")),1),f(s,{iconClass:"add-staff-icon",size:"18",color:"#ffffff"})])]),_:1},8,["title"]),l("div",{ref_key:"jobManageItemRef",ref:b,class:"cost-manage-box hk-pt-52 container-setPx"},[(d(!0),g(D,null,G(t.value,o=>(d(),g("div",{class:"cost-manage-item",key:o.value},[f(q,{type:1,data:o,onOnClose:A,onOnDetails:O},{default:_(()=>[Z]),_:2},1032,["data"])]))),128))],512),!t.value.length&&!p.value?(d(),K(n,{key:0})):W("",!0),f(i,{ref_key:"confirmPopRef",ref:m,popClass:"tips-dialog-box",customFooter:!0,onOnCancel:y,onOnConfirm:M},{default:_(()=>{var o;return[l("div",ee,[l("div",ae,[N("确定删除“"+P((o=u.value)==null?void 0:o.label)+"”",1),te,N("费用种类？")])])]}),_:1},512)],64)}}});export{ce as default};
