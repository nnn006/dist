import{l as U,R as $,r as z,a as m,b as P,K as M,L as v,M as E,u as o,z as _,S as q,k as n,N as w,V as p,D as j,O as H,F as K}from"./vue.C2TeXnf4.js";import{j as L,d as W,I as Z,f as G,t as y,a0 as V,a1 as x,M as J,u as Q,a2 as X,$ as i,a3 as Y}from"./index.C__3lhMr.js";const ee={class:"set-pwd-box hk-pt-52"},se={class:"set-pwd-form"},oe=["src"],ae=w("div",{class:"form-item-auxbox"},null,-1),te=["src"],ne=U({__name:"setPwd",setup(re){var g;const b=$(),S=L(),{pushName:C,comeback:k}=W(),{tel:D,code:T}=b.query,c=z(Number((g=b.query)==null?void 0:g.type)),{t:a}=Q(),O=Z.inApp(),I=m(()=>c.value===1?a("base.setPwdTxt"):a("base.setNewPwdTxt")),e=P({password:"",oncePwd:""}),r=P({passwordError:!1,oncePwdError:!1}),N=m(()=>e.password&&e.oncePwd===e.password&&!r.passwordError&&!r.oncePwdError),d=P({isPwdShow:!1,isOncePwdShow:!1}),f=m(()=>({pwdErr:[a("base.setPwdErrFir"),a("base.setPwdErrSec")],onceOwdErr:[a("base.setPwdErrTir")]})),B=()=>{const s=/.{8,16}/,t=/[a-zA-Z]/.test(e.password),u=/[0-9]/.test(e.password),l=/[\W_]/.test(e.password),R=(t?1:0)+(u?1:0)+(l?1:0);s.test(e.password)&&R>=2?r.passwordError=!1:r.passwordError=!0},F=()=>{e.oncePwd!==""&&e.oncePwd===e.password?r.oncePwdError=!1:r.oncePwdError=!0},h=s=>{d[s]=!d[s]},A=()=>{c.value===1?X({newPassword:e.password,isSaveToken:!0}).then(async s=>{s.code===0?(S.setInforPwd(),k(),i({message:"设置密码成功"})):i({message:s.msg})}).catch(s=>{i({message:s})}):Y({phone:D,code:T,password:e.password}).then(s=>{s.code===0?C("ModifySuccess"):i({message:s.msg})}).catch(s=>{i({message:s})})};return(s,t)=>{const u=M("FormItemPop");return v(),E(K,null,[o(O)?(v(),E("div",{key:0,class:_(["applet-header-box",{"set-pwd-headerbg":c.value===1}])},null,2)):q("",!0),n(G,{class:_(c.value===1?"set-pwd-headerbg":"set-pwd-header"),title:I.value,comebackColor:c.value!==1?"#0D0D0D":"#ffffff"},null,8,["class","title","comebackColor"]),w("div",ee,[w("div",se,[n(u,{label:o(a)("base.inputPwdTxt"),popVisible:r.passwordError,errorData:f.value.pwdErr},{default:p(()=>[n(o(y),{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=l=>e.password=l),type:d.isPwdShow?"text":"password",placeholder:o(a)("base.setPwdPld"),clearable:"","clear-icon":"cross",onBlur:B},{"right-icon":p(()=>[w("img",{class:"pwd-taggle-icon",src:d.isPwdShow?o(V):o(x),onClick:t[0]||(t[0]=l=>h("isPwdShow")),alt:""},null,8,oe)]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["label","popVisible","errorData"]),ae,n(u,{label:o(a)("base.confirmPwdTxt"),popVisible:r.oncePwdError,errorData:f.value.onceOwdErr},{default:p(()=>[n(o(y),{modelValue:e.oncePwd,"onUpdate:modelValue":t[3]||(t[3]=l=>e.oncePwd=l),type:d.isOncePwdShow?"text":"password",placeholder:o(a)("base.setPwdOncePld"),clearable:"","clear-icon":"cross",onBlur:F},{"right-icon":p(()=>[w("img",{class:"pwd-taggle-icon",src:d.isOncePwdShow?o(V):o(x),onClick:t[2]||(t[2]=l=>h("isOncePwdShow")),alt:""},null,8,te)]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["label","popVisible","errorData"])]),n(o(J),{class:"set-step-btn",disabled:!N.value,type:"primary",onClick:A},{default:p(()=>[j(H(o(a)("base.nextStep")),1)]),_:1},8,["disabled"])])],64)}}});export{ne as default};
