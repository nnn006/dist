import{_ as T}from"./right-arrow-icon.CaFxgYzl.js";import{u as B,y as H,a4 as P,b as D,az as w,g as L}from"./index.Cjri3_sP.js";import{d as M,l as o,p as R,o as V,a as A,B as n,x as g,i as t,Q as u,H as F,_ as I,r as c,n as N,S as $}from"./vue.BCHSKM6y.js";const z={class:"staff-manage-box hk-manage-box hk-pt-noScreen"},j={class:"add-member-screen-box"},q=t("div",{class:"ambs-l"},"选择家庭",-1),E={class:"ambs-r hk-flex hk-items-center"},O=t("img",{style:{"margin-left":"6px"},class:"input-right-arrow",src:T},null,-1),Q=t("div",{class:"hk-manage-dialog"},[t("div",{class:"hkm-dialog-content"},"此家已有管家！如需更换管家，请删除原管家。")],-1),U={class:"hkm-dialog-btn"},Y=M({__name:"add",setup(G){const{t:r}=D(),_=o(null),v=o(null),i=o(""),m=o(""),{hkMessage:k}=L(),b=I(),f=B(),p=o([{text:r("base.selectFamilyTxt"),value:0}]),l=o({text:"家庭",value:0}),h=a=>{var s;l.value=a[0],(s=a[0])!=null&&s.value?w({identifyType:3,homeIds:[l.value.value]}).then(e=>{e.code===0?(i.value=e.data.shareCode,m.value=""):e.code===30009?(i.value="",m.value="此家已有管家！如需更换管家，请删除原管家。"):k(e.msg)}):i.value=""},x=()=>{v.value.taggleVisible(!0)},S=a=>{_.value.taggleDialog(a)};return R(async()=>{await f.setHomeSimpleLs();const a=await f.homeSimple;p.value=a;const{homeId:s}=b.query;if(s){const e=a.filter(d=>d.value===Number(s));e.length&&(l.value=e[0],h(e))}}),(a,s)=>{const e=c("SecondHeader"),d=c("AddMember"),y=c("BtmSingleBtn"),C=c("ConfrimPopAgain");return V(),A(F,null,[n(H,{title:g(r)("base.addHkTxt")},null,8,["title"]),t("div",z,[n(e,{noScreen:!0}),n(d,{inviteLink:i.value,inviteDesc:m.value,typ:3},{default:u(()=>[t("div",j,[t("div",{class:"add-member-screen hk-flex hk-jbetween hk-items-center",onClick:x},[q,t("div",E,[t("div",{class:N(["ambs-r-label",{"no-screen":l.value.value===0}])},$(l.value.text),3),O])])])]),_:1},8,["inviteLink","inviteDesc"])]),n(P,{ref_key:"homeTypePopRef",ref:v,title:"选择家庭",data:p.value,onOnChange:h},null,8,["data"]),n(C,{ref_key:"confirmPopRef",ref:_,popClass:"hk-manage-dialog-box",customFooter:!0},{customFooter:u(()=>[t("div",U,[n(y,{handleTxt:g(r)("base.confirmTxt"),disable:!0,onClick:s[0]||(s[0]=J=>S(!1))},null,8,["handleTxt"])])]),default:u(()=>[Q]),_:1},512)],64)}}});export{Y as default};
