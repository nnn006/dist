import{u as R,y as j,a4 as F,b as A,c as V,aA as E,aE as Y,d as $,a6 as q,e as x,g as O}from"./index.Cjri3_sP.js";import{d as U,l as m,m as z,p as Q,o as G,a as J,B as i,Q as n,x as a,i as o,S as l,H as K,_ as W,j as X,r as b,L as Z}from"./vue.BCHSKM6y.js";import{_ as f}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.DMYgpoJW.js";import"./right-arrow-icon.CaFxgYzl.js";const ee={class:"add-home-box hk-flex hk-flex-col container-setPx"},ae={class:"add-home-form"},te={class:"staff-details-info"},oe={class:"staff-details-info"},se={class:"staff-details-info"},ie={class:"staff-details-info"},ne={class:"staff-info-item"},le={class:"staff-info-title"},ce=["src"],de=o("div",{class:"footer-aux-btmbox"},null,-1),me={class:"footer-btn-box"},fe={class:"staff-details-dialog"},re={class:"pd-dialog-content"},ve=U({__name:"details",setup(ue){const{t:s}=A(),k=W(),{id:r,homeId:T}=k.query,{hkMessage:g}=O(),M=X("endPageLoading"),h=R(),{pushName:P,comeback:w}=V(),v=m([]),u=m([]),p=m(null),y=m(null),I=m(null),e=z({nickname:"",avatar:"",homeName:"",birthday:"",contactInformation:"",identifyMsgId:"",duties:"",country:"",joinTime:0,countryId:0}),C=c=>{E({identifyId:+r}).then(async t=>{await h.setHomeSimpleLs();const _=await h.homeSimple;t.code===0?(e.avatar=t.data.avatar,e.nickname=t.data.nickname,e.homeName=t.data.homeName,e.birthday=t.data.birthday,e.contactInformation=t.data.contactInformation,e.identifyMsgId=t.data.identifyMsgId,e.country=t.data.country,e.duties=t.data.duties,e.joinTime=t.data.joinTime,e.countryId=t.data.countryId,u.value=t.data.familyMemberHomeList.map(d=>d.homeId),v.value=_.filter(d=>u.value.includes(d.value))):g(t.msg)}).finally(()=>{c&&c()})},S=()=>{p.value.taggleDialog(!0)},B=()=>{y.value.taggleVisible(!0)},L=()=>{Y({identifyId:+r}).then(c=>{c.code===0?w():g(c.msg)})},D=()=>{P("FamiEdit",{id:r,homeId:T})},H=()=>{I.value.taggleModal()};return Q(async()=>{C(M)}),(c,t)=>{const _=b("BtmSingleBtn"),d=b("ConfrimPopAgain"),N=b("PreviewImage");return G(),J(K,null,[i(j,{title:a(s)("base.familyDetails")},{rightContent:n(()=>[i(a($),{size:"mini",class:"staff-quit-btn",onClick:S},{default:n(()=>[Z(l(a(s)("base.btn.delAccount")),1)]),_:1})]),_:1},8,["title"]),o("div",ee,[o("div",ae,[i(f,{label:a(s)("base.nameTxt")},{default:n(()=>[o("div",te,l(e.nickname),1)]),_:1},8,["label"]),i(f,{label:a(s)("base.telNotxt")},{default:n(()=>[o("div",oe,l(e.contactInformation),1)]),_:1},8,["label"]),i(f,{label:a(s)("base.birthdayTxt")},{default:n(()=>[o("div",se,l(e.birthday),1)]),_:1},8,["label"]),i(f,{label:a(s)("base.registerTimeTxt")},{default:n(()=>[o("div",ie,l(a(q)(e.joinTime*1e3).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),i(f,{label:a(s)("base.manageFamilyTxt")},{default:n(()=>[o("div",{class:"staff-details-clickview",onClick:B},l(a(s)("base.clickViewTxt")),1)]),_:1},8,["label"]),o("div",ne,[o("div",le,l(a(s)("base.pictrueTxt")),1),o("img",{class:"staff-info-img",src:a(x)+e.avatar,onClick:H},null,8,ce)])]),de,o("div",me,[i(_,{disable:!0,handleTxt:a(s)("base.btn.editInfo"),onOnHandle:D},null,8,["handleTxt"])])]),i(d,{ref_key:"confirmPopRef",ref:p,popClass:"staff-details-dialog-box",customFooter:!0,onOnConfirm:L},{default:n(()=>[o("div",fe,[o("div",re,l(`确定删除${e.nickname}`),1)])]),_:1},512),i(F,{ref_key:"feeTypePopRef",ref:y,title:a(s)("base.manageFamilyTxt"),isSingle:!1,isSelect:!1,value:u.value,data:v.value},null,8,["title","value","data"]),i(N,{ref_key:"previewImgRef",ref:I,imageList:[a(x)+e.avatar]},null,8,["imageList"])],64)}}});export{ve as default};
