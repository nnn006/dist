import{a as k,b as R,c as I,aC as b,y as D,aD as w}from"./index.Cjri3_sP.js";import{d as M,l as v,m as N,p as z,o as A,e as B,Q as p,x as o,r as d,B as s,i as r,S as F}from"./vue.BCHSKM6y.js";const P={class:"smh-mr-5"},$={class:"staff-manage-box"},T={class:"staff-m-main-box hk-pt-noScreen"},Q=M({name:"FamilyAcc",__name:"index",setup(j){const{t:_}=R(),{pushName:h}=I(),l=v(null),{pageLoading:L,endPageLoading:S}=k({activeAction:y}),n=N({page:1,pageSize:10,total:0}),f=v([]),m=g=>{const i={page:n.page,pageSize:n.pageSize,typ:2};b(i).then(a=>{if(a.code===0){const t=a.data.list.map(e=>({title:e.nickname,pic:e.avatar,job:e.duties,time:e.joinTime*1e3,homeName:e.homeName,id:e.identifyId,homeId:e.homeId}));n.page===1?f.value=t:f.value.push(...t),n.total=a.data.total}}).finally(()=>{var a,t;(a=l.value)==null||a.taggleRefreshState("isLoading",!1),(t=l.value)==null||t.taggleRefreshState("loading",!1),g&&g()})},x=()=>{n.page++,m()},u=()=>{n.page=1,m()};async function y(){u()}return z(()=>{m(S)}),(g,i)=>{const a=d("SvgIcon"),t=d("SecondHeader"),e=d("DownRefresh"),C=d("MainContainer");return A(),B(C,{exitLoading:!0,pageLoading:o(L)},{default:p(()=>[s(D,{title:o(_)("base.header.familyAccManage")},{rightContent:p(()=>[r("div",{class:"staff-manage-header-btn hk-flex hk-items-center",onClick:i[0]||(i[0]=c=>o(h)("FamilyAdd"))},[r("span",P,F(o(_)("base.addFamilyTxt")),1),s(a,{iconClass:"add-staff-icon",size:"18",color:"#ffffff"})])]),_:1},8,["title"]),r("div",$,[s(t,{noScreen:!0}),r("div",T,[s(e,{ref_key:"downRefreshRef",ref:l,dataList:f.value,pagination:n,onOnRefresh:u,onOnLoad:x},{default:p(({data:c})=>[s(w,{existTime:!0,data:c,onClick:H=>o(h)("FamiDetails",{id:c.id,homeId:c.homeId})},null,8,["data","onClick"])]),_:1},8,["dataList","pagination"])])])]),_:1},8,["pageLoading"])}}});export{Q as default};
