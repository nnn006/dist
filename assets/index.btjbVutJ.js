import{a3 as L,y as j,b as T,c as V,aF as w,aG as F,aH as H,aI as $,g as E,aJ as q}from"./index.Cjri3_sP.js";import{_ as z}from"./manageItem.vue_vue_type_style_index_0_lang.PpIakLvA.js";import{d as G,l as r,p as Q,o as d,a as g,B as f,Q as _,x as v,i as l,H as D,R as U,e as K,f as W,q as X,r as h,S as J,L as P}from"./vue.BCHSKM6y.js";const Y={class:"smh-mr-5"},Z=l("img",{class:"drap-icon",src:$,alt:""},null,-1),ee={class:"tips-details-dialog"},ae={class:"tips-dialog-content"},se=l("br",null,null,-1),ie=G({__name:"index",setup(te){const{t:b}=T(),m=r(null),{pushName:k}=V(),{hkMessage:i}=E(),N=L(),p=r(!1),s=r([]),u=r(null),C=r(null),A=e=>{var a;u.value=e,(a=m.value)==null||a.taggleDialog(!0)},x=()=>{u.value=null},M=()=>{w({id:u.value.value}).then(e=>{var a;e.code===0?((a=m.value)==null||a.taggleDialog(!1),i("删除成功"),y(),x(),N.setJob()):i(e.msg)}).catch(e=>{i(e)})},O=e=>{var a;k("JobAdd",{title:e.label,id:e.value,permission:(a=e.permission)==null?void 0:a[1]})},y=e=>{p.value=!0,F().then(a=>{if(a.code===0){const t=a.data.list.map(o=>({label:o.title,value:o.id,permission:o.permission}));s.value=t,e&&e()}else i(a.msg)}).finally(()=>{p.value=!1})},R=(e,a,t)=>{q({tranId:s.value[t].value,index:a+1}).then(o=>{if(o.code===0){const c=JSON.parse(JSON.stringify(s.value)),n=c.splice(t,1)[0],B=c.slice(0,t),I=c.slice(t),S=[...B,...I];S.splice(a,0,n),s.value=S}else i(o.msg)})};return Q(()=>{y(()=>{H(C.value,s.value,{handle:".drap-icon",onUpdate:e=>{R(s.value,e.newIndex,e.oldIndex),X(()=>{})}})})}),(e,a)=>{const t=h("SvgIcon"),o=h("hk-empty"),c=h("ConfrimPopAgain");return d(),g(D,null,[f(j,{title:v(b)("base.header.posManage")},{rightContent:_(()=>[l("div",{class:"staff-manage-header-btn hk-flex hk-items-center",onClick:a[0]||(a[0]=n=>v(k)("JobAdd"))},[l("span",Y,J(v(b)("base.addJopTxt")),1),f(t,{iconClass:"add-staff-icon",size:"18",color:"#ffffff"})])]),_:1},8,["title"]),l("div",{ref_key:"jobManageItemRef",ref:C,class:"job-manage-box hk-pt-52 container-setPx"},[(d(!0),g(D,null,U(s.value,n=>(d(),g("div",{class:"job-manage-item",key:n.value},[f(z,{type:2,data:n,onOnClose:A,onOnDetails:O},{default:_(()=>[Z]),_:2},1032,["data"])]))),128))],512),!s.value.length&&!p.value?(d(),K(o,{key:0})):W("",!0),f(c,{ref_key:"confirmPopRef",ref:m,popClass:"tips-dialog-box",onOnCancel:x,onOnConfirm:M,customFooter:!0},{default:_(()=>{var n;return[l("div",ee,[l("div",ae,[P("确定删除“"+J((n=u.value)==null?void 0:n.label)+"”",1),se,P("职位吗？")])])]}),_:1},512)],64)}}});export{ie as default};
