import{u as U,h as Q,y as z,b as G,c as J,aA as K,aB as W,d as X,a6 as Z,e as C,g as ee}from"./index.Cjri3_sP.js";import{d as te,l as u,m as ae,p as se,o as c,a as m,B as o,a5 as oe,Q as l,x as t,i as s,e as ne,f as p,S as i,H as P,_ as ie,j as le,r as I,L as H}from"./vue.BCHSKM6y.js";import{_ as d}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.DMYgpoJW.js";import{_ as de}from"./imprestSheet.vue_vue_type_script_setup_true_name_imprest-sheet_lang.CulFR8TF.js";import"./right-arrow-icon.CaFxgYzl.js";import"./index.YYOoEeNT.js";const fe={class:"add-home-box hk-flex hk-flex-col container-setPx"},ce={class:"add-home-form"},re={class:"staff-details-info"},me={class:"staff-details-info"},ue={class:"staff-details-info"},_e={class:"staff-details-info"},be={class:"staff-details-info"},ve={key:0,class:"staff-details-info"},he={key:1,class:"staff-details-info"},ye={class:"staff-details-info"},ge=s("div",{class:"staff-details-info pydtl-color-err"},"离职",-1),pe={class:"staff-details-info"},Ie={class:"staff-info-item"},xe={class:"staff-info-title"},ke=["src"],Te=s("div",{class:"footer-aux-btmbox"},null,-1),Be={key:0,class:"footer-btn-box"},Se={key:1,class:"footer-btn-box"},Ce={class:"staff-details-dialog"},Pe={class:"pd-dialog-content"},He=s("p",null,"提示：请勿忘记线下收回备用金",-1),$e=te({__name:"details",setup(Me){const{t:n}=G(),x=ie(),{id:_,homeId:v,newsStatus:we}=x.query,M=U(),r=u(""),y=u(!0),h=u(2),{hkMessage:g}=ee(),{auth:w,isStaff:Ne,isHk:je}=Q(),{pushName:b,comeback:N}=J(),j=le("endPageLoading"),k=u(null),T=u(null),B=u(null),e=ae({nickname:"",avatar:"",homeName:"",birthday:"",contactInformation:"",identifyMsgId:"",duties:"",country:"",joinTime:0,countryId:0,currency:"",memberId:0}),R=f=>{K({identifyId:+_}).then(a=>{a.code===0?(e.avatar=a.data.avatar,e.nickname=a.data.nickname,e.homeName=a.data.homeName,e.birthday=a.data.birthday,e.contactInformation=a.data.contactInformation,e.identifyMsgId=a.data.identifyMsgId,e.country=a.data.country,e.duties=a.data.duties,e.joinTime=a.data.joinTime,e.countryId=a.data.countryId,e.currency=a.data.currency,e.memberId=a.data.identifyId,h.value=a.data.status):g(a.msg)}).finally(()=>{y.value=!1,f&&f()})},D=()=>{k.value.taggleDialog(!0)},O=()=>{W({identifyId:+_,homeId:+v}).then(f=>{f.code===0?(g("离职成功"),N()):g(f.msg)})},E=()=>{b("StaffEdit",{id:_,homeId:v})},L=()=>{b("StaffEdit",{id:_,homeId:v,tp:"staff"})},V=()=>{B.value.taggleSheetVisible(!0)},$=f=>{b("ImpOperation",{id:_,homeId:v,currency:e.currency,doType:f.value})},F=()=>{T.value.taggleModal()};return se(()=>{R(j),r.value=x.query.tp||"other"}),(f,a)=>{const S=I("BaseHandleBtn"),Y=I("ConfrimPopAgain"),q=I("PreviewImage");return c(),m(P,null,[o(z,{title:r.value==="staff"?"个人资料":r.value==="other"?t(n)("base.staffInfoTxt"):""},oe({_:2},[r.value&&r.value==="other"&&h.value!==2?{name:"rightContent",fn:l(()=>[o(t(X),{size:"mini",class:"staff-quit-btn",onClick:D},{default:l(()=>[H(i(t(n)("base.staffQuitTxt")),1)]),_:1})]),key:"0"}:void 0]),1032,["title"]),s("div",fe,[s("div",ce,[o(d,{label:t(n)("base.nameTxt")},{default:l(()=>[s("div",re,i(e.nickname),1)]),_:1},8,["label"]),o(d,{label:t(n)("base.jopTxt")},{default:l(()=>[s("div",me,i(e.duties),1)]),_:1},8,["label"]),o(d,{label:t(n)("base.belongHomeTxt")},{default:l(()=>[s("div",ue,i(e.homeName),1)]),_:1},8,["label"]),o(d,{label:t(n)("base.nationTxt")},{default:l(()=>[s("div",_e,i(e.country),1)]),_:1},8,["label"]),o(d,{label:t(n)("base.idCard")},{default:l(()=>[s("div",be,i(e.identifyMsgId),1)]),_:1},8,["label"]),o(d,{label:t(n)("base.telNotxt")},{default:l(()=>[e.contactInformation?(c(),m("div",ve,i(e.contactInformation),1)):(c(),m(P,{key:1},[e.memberId===t(M).userInfo.identifyId?(c(),m("div",{key:0,class:"staff-details-info to-banding-tel",onClick:a[0]||(a[0]=A=>t(b)("BindingTel"))},i(y.value?"":"绑定手机"),1)):(c(),m("div",he,i(y.value?"":"未绑定"),1))],64))]),_:1},8,["label"]),o(d,{label:t(n)("base.birthdayTxt")},{default:l(()=>[s("div",ye,i(e.birthday),1)]),_:1},8,["label"]),h.value===2?(c(),ne(d,{key:0,label:"状态"},{default:l(()=>[ge]),_:1})):p("",!0),o(d,{label:t(n)("base.entryTime")},{default:l(()=>[s("div",pe,i(t(Z)(e.joinTime*1e3).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),s("div",Ie,[s("div",xe,i(t(n)("base.pictrueTxt")),1),s("img",{class:"staff-info-img",src:t(C)+e.avatar,onClick:F},null,8,ke)])]),Te,r.value==="other"&&h.value!==2?(c(),m("div",Be,[o(S,{firBtnTxt:t(n)("base.btn.editInfo"),secBtnTxt:t(w)===3?"划拨/收回备用金":"发放/收回备用金",onOnFirBtnHandle:E,onOnSecBtnHandle:V},null,8,["firBtnTxt","secBtnTxt"])])):p("",!0),r.value==="staff"?(c(),m("div",Se,[o(S,{firBtnTxt:"修改密码",secBtnTxt:"编辑资料",onOnFirBtnHandle:a[1]||(a[1]=A=>t(b)("UpdatePwd")),onOnSecBtnHandle:L})])):p("",!0)]),o(Y,{ref_key:"confirmPopRef",ref:k,popClass:"staff-details-dialog-box",customFooter:!0,onOnConfirm:O},{default:l(()=>[s("div",Ce,[s("div",Pe,[H(i(t(n)("base.confirmDelStaff"))+" ",1),He])])]),_:1},512),o(de,{ref_key:"imprestSheetRef",ref:B,onOnChange:$},null,512),o(q,{ref_key:"previewImgRef",ref:T,imageList:[t(C)+e.avatar]},null,8,["imageList"])],64)}}});export{$e as default};
