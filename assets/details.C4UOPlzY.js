import{f as A,A as H,u as V,R as I,S,a as M}from"./index.C__3lhMr.js";import{l as O,r as k,R as F,i as $,b as L,a as E,d as q,K as y,L as r,U as B,V as d,k as s,u as n,N as a,O as l,S as p,M as b,D as c}from"./vue.C2TeXnf4.js";import{_ as i}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.MpSsZcmr.js";import"./right-arrow-icon.CaFxgYzl.js";const K={class:"imprest-details-box container-setPx"},U={style:{"font-weight":"500"}},z={key:1,class:"imprest-info-item"},G={class:"imprest-info-title"},J={class:"imprest-info-desc"},Q={key:2,class:"footer-aux-btmbox"},W={key:3,class:"footer-btn-box"},X={class:"imprest-details-dialog"},Y={class:"pd-dialog-content"},Z=a("br",null,null,-1),ee={class:"hk-fw-500"},te={class:"imprest-details-dialog"},ae={class:"pd-dialog-content"},se=a("br",null,null,-1),le={class:"hk-fw-500"},re=O({__name:"details",setup(ne){const m=k(null),v=k(null),j=F(),{hkMessage:_}=M(),C=$("endPageLoading"),{id:g}=j.query,e=L({name:{type:"text",value:""},price:{type:"number",value:0},homeName:{type:"text",value:""},job:{type:"text",value:""},time:{type:"dayjs",value:0},audRes:{type:"text",value:""},reviewer:{type:"text",value:""},desc:"",currency:"",status:0}),f=E(()=>e.status!==1),{t:o}=V(),N=()=>{v.value.taggleDialog(!0)},x=u=>{I({applicationId:g}).then(t=>{t.code===0?(e.name={type:"text",value:t.data.identifyName},e.price={type:"number",value:t.data.amount},e.homeName={type:"text",value:t.data.homeName},e.job={type:"text",value:t.data.identifyDuties},e.time={type:"dayjs",value:t.data.applicationTime},e.audRes={type:"text",value:t.data.status===1?"待审核":t.data.status===2?"通过":"拒绝"},e.reviewer={type:"text",value:t.data.auditIdentifyName},e.desc=t.data.remark,e.currency=t.data.currency,e.status=t.data.status):_(t.msg)}).finally(()=>{u&&u()})},T=()=>{m.value.taggleDialog(!0)},h=u=>{S({applicationId:g,status:u}).then(t=>{t.code===0?(x(),v.value.taggleDialog(!1),m.value.taggleDialog(!1)):_(t.msg)}).catch(t=>{_(t)})};return q(()=>{x(C)}),(u,t)=>{const P=y("BaseHandleBtn"),D=y("ConfrimPopAgain"),w=y("MainContainer");return r(),B(w,null,{header:d(()=>[s(A,{title:n(o)("base.header.impExamine")},null,8,["title"])]),default:d(()=>[a("div",K,[s(i,{label:"申请人",valData:e.name},null,8,["valData"]),s(i,{label:"申请金额"},{default:d(()=>[a("div",U,l(n(H)(e.price.value))+" "+l(e.currency),1)]),_:1}),s(i,{label:n(o)("base.belongHomeTxt"),valData:e.homeName},null,8,["label","valData"]),s(i,{label:n(o)("base.jopTxt"),valData:e.job},null,8,["label","valData"]),s(i,{label:n(o)("base.timeTxt"),valData:e.time},null,8,["label","valData"]),f.value?(r(),B(i,{key:0,label:n(o)("base.reviewerTxt"),valData:e.reviewer},null,8,["label","valData"])):p("",!0),s(i,{label:"状态",isStatusItem:!0,statusValue:e.status===1?"wait":e.status===2?"pass":"reject"},null,8,["statusValue"]),e.desc?(r(),b("div",z,[a("div",G,l(n(o)("base.descTxt")),1),a("div",J,l(e.desc),1)])):p("",!0),!f.value&&e.status!==0?(r(),b("div",Q)):p("",!0),!f.value&&e.status!==0?(r(),b("div",W,[s(P,{firBtnTxt:n(o)("base.btn.reject"),secBtnTxt:n(o)("base.btn.agree"),onOnFirBtnHandle:N,onOnSecBtnHandle:T},null,8,["firBtnTxt","secBtnTxt"])])):p("",!0)]),s(D,{ref_key:"confirmPopRef",ref:m,popClass:"imprest-details-dialog-box",customFooter:!0,onOnConfirm:t[0]||(t[0]=R=>h(2))},{default:d(()=>[a("div",X,[a("div",Y,[c("确定同意“"+l(e.name.value)+"”",1),Z,c(" 预支"),a("span",ee,l(e.price.value),1),c(" "+l(e.currency)+"？",1)])])]),_:1},512),s(D,{ref_key:"rejectPopRef",ref:v,popClass:"imprest-details-reject-dialog",customFooter:!0,onOnConfirm:t[1]||(t[1]=R=>h(3))},{default:d(()=>[a("div",te,[a("div",ae,[c("确定拒绝“"+l(e.name.value)+"”",1),se,c(" 预支"),a("span",le,l(e.price.value),1),c(" "+l(e.currency)+"？",1)])])]),_:1},512)]),_:1})}}});export{re as default};
