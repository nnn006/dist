import{u as I,o as U,b as A,c as P,q as F,ae as R,y as H,t as h,d as q,g as z}from"./index.Cjri3_sP.js";import{d as E,l as k,m as x,g as L,k as M,o as f,a as p,B as c,i as o,S as m,x as t,H as g,L as C,Q,r as w}from"./vue.BCHSKM6y.js";const $={class:"register-box modify-pwd-box"},j={class:"reg-form-box"},G={class:"reg-form-item hk-flex hk-items-center"},J={class:"reg-area-span"},K={class:"reg-field-box"},O={class:"reg-form-item rf-mt-24 hk-flex hk-items-center"},W={class:"reg-field-box"},oe=E({__name:"bindTel",setup(X){const{t:u}=A();let a=null;const{pushName:Y,comeback:V}=P(),{hkMessage:d}=z(),S=I(),v=k(null),e=x({account:"",verCode:""}),D=L(()=>!!e.account&&!!e.verCode),i=k(86),s=x({isCountdown:!1,countdownNum:60}),T=()=>{v.value.taggleVisible(!0)},b=U(()=>{if(!e.account){d("请填写手机号码");return}s.isCountdown||(s.isCountdown=!0,F({phone:"+"+i.value+e.account}).then(n=>{n.code===0?_():d(n.msg)}).catch(n=>{d(n)}))},500),_=()=>{a=setTimeout(()=>{s.countdownNum>=1?(s.countdownNum--,_()):(s.isCountdown=!1,s.countdownNum=60,clearTimeout(a),a=null)},1e3)},N=()=>{R({phone:"+"+i.value+e.account,code:e.verCode}).then(n=>{n.code===0?(d("绑定手机号成功"),S.updateUserInfo("contactInformation","+"+i.value+e.account),V()):d(n.msg)})};return M(()=>{a&&(clearTimeout(a),a=null)}),(n,l)=>{const y=w("SvgIcon"),B=w("AreaCodeSelect");return f(),p(g,null,[c(H,{class:"login-module-header",title:"绑定手机",comebackColor:"#0D0D0D"}),o("div",$,[o("div",j,[o("div",G,[o("div",{class:"reg-area hk-flex hk-items-center",onClick:T},[o("span",J,"+"+m(i.value),1),c(y,{iconClass:"down-select-svg",size:"9",color:"#0D0D0D"})]),o("div",K,[c(t(h),{modelValue:e.account,"onUpdate:modelValue":l[0]||(l[0]=r=>e.account=r),placeholder:t(u)("base.regTelPldtxt"),clearable:"","clear-icon":"cross"},null,8,["modelValue","placeholder"])])]),o("div",O,[o("div",W,[c(t(h),{modelValue:e.verCode,"onUpdate:modelValue":l[1]||(l[1]=r=>e.verCode=r),placeholder:t(u)("base.regVerCodePldtxt"),clearable:"","clear-icon":"cross"},null,8,["modelValue","placeholder"])]),o("div",{class:"get-vcode-box",onClick:l[2]||(l[2]=(...r)=>t(b)&&t(b)(...r))},[s.isCountdown?(f(),p(g,{key:0},[C(m(s.countdownNum)+" ",1),o("span",null,m(t(u)("base.vCodeSendTxt")),1)],64)):(f(),p(g,{key:1},[C(m(t(u)("base.getVcodeTxt")),1)],64))])])]),c(t(q),{class:"reg-step-btn",disabled:!D.value,type:"primary",onClick:N},{default:Q(()=>[C("绑定")]),_:1},8,["disabled"])]),c(B,{ref_key:"areaCodeSelectRef",ref:v},null,512)],64)}}});export{oe as default};
