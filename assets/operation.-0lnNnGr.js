import{d as q,m as N,l as m,g as _,p as S,o as D,a as I,B as r,i as e,Q as w,x as a,S as p,L as C,H,_ as O,r as P}from"./vue.BCHSKM6y.js";import{h as R,y as $,b as F,c as L,t as y,g as U}from"./index.Cjri3_sP.js";import{_ as j}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.DMYgpoJW.js";import{d as A}from"./index.DllRNd8O.js";import"./right-arrow-icon.CaFxgYzl.js";const E={class:"pay-handle-box container-setPx hk-flex hk-flex-col hk-pt-52"},Q={class:"pay-handle-from form-pt-8"},z={class:"hk-flex hk-items-center"},G={class:"form-item-price-util"},J={class:"form-textarea-box"},K={class:"hk-flex hk-jbetween hk-items-center form-textarea-t"},W={class:"form-textarea-tl"},X={class:"form-textarea-tr"},Y={class:"form-textarea-b"},Z=e("div",{class:"footer-aux-btmbox"},null,-1),ee={class:"footer-btn-box"},re=q({__name:"operation",setup(te){const{t:s}=F(),{hkMessage:f}=U(),{comeback:h}=L(),t=N({payMoney:"",desc:""}),n=O(),{homeId:x,id:v}=n.query,{auth:c}=R(),o=m(Number(n.query.doType)),b=m(n.query.currency),d=m(!1),g=_(()=>!!t.payMoney),k=_(()=>c===3?o.value===5?"划拨备用金":"收回备用金":s("base.footer.imprest",{pre:o.value===5?s("base.giveOutTxt"):s("base.takeBackTxt")})),T=()=>{d.value=!0,A({homeId:x,amount:t.payMoney,staffIdentifyId:v,typ:o.value,remark:t.desc}).then(l=>{l.code===0?(f(`${o.value===5?c===3?"划拨":"发放":"收回"}备用金成功`),B(),h()):f(l.msg)}).finally(()=>{d.value=!1})},B=()=>{t.desc="",t.payMoney=""},M=l=>l.replace(/[^0-9.,]/g,"");return S(async()=>{console.log(n.query),o.value=Number(n.query.doType)}),(l,i)=>{const V=P("BtmSingleBtn");return D(),I(H,null,[r($,{title:k.value},null,8,["title"]),e("div",E,[e("div",Q,[r(j,{label:o.value===5?a(c)===3?"划拨金额":"发放金额":"收回金额",isRequire:!0},{default:w(()=>[e("div",z,[r(a(y),{class:"form-item-price",modelValue:t.payMoney,"onUpdate:modelValue":i[0]||(i[0]=u=>t.payMoney=u),formatter:M,type:"number",placeholder:"0"},null,8,["modelValue"]),e("span",G,p(b.value),1)])]),_:1},8,["label"]),e("div",J,[e("div",K,[e("div",W,p(a(s)("base.descTxt")),1),e("div",X,[e("span",null,p(t.desc.length),1),C("/200")])]),e("div",Y,[r(a(y),{class:"form-textarea",maxlength:200,rows:"6",modelValue:t.desc,"onUpdate:modelValue":i[1]||(i[1]=u=>t.desc=u),placeholder:a(s)("base.descTxt")+":",type:"textarea"},null,8,["modelValue","placeholder"])])])]),Z,e("div",ee,[r(V,{loading:d.value,disable:g.value,handleTxt:o.value===5?a(c)===3?"划拨":a(s)("base.giveOutTxt"):a(s)("base.takeBackTxt"),onOnHandle:T},null,8,["loading","disable","handleTxt"])])])],64)}}});export{re as default};
