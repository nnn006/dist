import{_ as B}from"./info-icon.D_5ulZjW.js";import{j as L,f as S,P as U,o as A,u as O,J as V,E as j,K as q,a as z}from"./index.C__3lhMr.js";import{_ as c}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.MpSsZcmr.js";import{l as F,J,R as K,i as $,r as u,d as E,K as d,L as G,U as Q,V as i,k as e,u as l,N as t,D as h,z as W,O as y}from"./vue.C2TeXnf4.js";import"./right-arrow-icon.CaFxgYzl.js";const X={class:"family-details-box hk-flex container-setPx"},Y={class:"hk-flex hk-items-center"},Z=t("div",{class:"wktime-info-desc"},"填写的工作时长为每日正常工作时长，超出正常工作时长的部分为加班时长，如填0则不计算加班时长。",-1),ee=t("img",{class:"wktime-info-icon",src:B,alt:"",srcset:""},null,-1),ae=t("div",{class:"footer-aux-btmbox"},null,-1),te={class:"footer-btn-box"},le={class:"family-details-dialog"},oe={class:"pd-dialog-content"},se=t("div",{class:"pd-dialog-tips"},"提示：此家庭的所有数据将一并被删除",-1),ne=t("div",{class:"family-details-dialog"},[t("div",{class:"pd-dialog-content"},"请先移除所有成员（包括亲属）再删除家庭")],-1),fe=F({__name:"editDetails",setup(ie){const v=J(),x=K(),{hkMessage:r}=z(),k=$("endPageLoading"),{id:m}=x.query,_=L(),f=u(null),p=u(null),g=u(null),o=u({}),{t:n}=O(),D=()=>{V({homeId:m}).then(a=>{a.code===0?a.data.num?r("请先移除所有成员（包括亲属）再删除家庭"):f.value.taggleDialog(!0):r(a.msg)}).catch(a=>{r(a||"网络错误")})},I=()=>{p.value.taggleDialog(!1)},P=a=>{j({homeId:+m}).then(s=>{s.code===0?o.value={homeName:{type:"text",value:s.data.nickname},country:{type:"text",value:s.data.country},area:{type:"text",value:s.data.area},address:{type:"text",value:s.data.address},currency:{type:"text",value:s.data.currency},pic:s.data.avatar,overTime:s.data.overTime}:r(s.msg)}).finally(()=>{a&&a()})},C=()=>{v.push({name:"AddHome",query:{id:m}})},H=()=>{q({homeId:+m}).then(a=>{a.code===0?(f.value.taggleDialog(!1),r("删除成功"),_.setHomeSimpleLs(),_.setUserIdent(),v.back()):r(a.msg)}).catch(a=>{r(a)})},T=()=>{g.value.taggleModal()};return E(()=>{P(k)}),(a,s)=>{const w=d("InfoItemImg"),R=d("BtmSingleBtn"),b=d("ConfrimPopAgain"),M=d("PreviewImage"),N=d("MainContainer");return G(),Q(N,null,{header:i(()=>[e(S,{title:l(n)("base.header.familyDetails")},null,8,["title"])]),default:i(()=>[t("div",X,[t("div",null,[e(c,{class:"pd-img",label:"照片"},{default:i(()=>[e(w,{class:"bi-info-img",imgUrl:o.value.pic,onClick:T},null,8,["imgUrl"])]),_:1}),e(c,{label:l(n)("base.homeNameTxt"),valData:o.value.homeName},null,8,["label","valData"]),e(c,{label:l(n)("base.countryTxt"),valData:o.value.country},null,8,["label","valData"]),e(c,{label:l(n)("base.currency"),valData:o.value.currency},null,8,["label","valData"]),e(c,{label:l(n)("base.areaTxt"),valData:o.value.area},null,8,["label","valData"]),e(c,{label:l(n)("base.addressTxt"),valData:o.value.address},null,8,["label","valData"]),e(c,null,{label:i(()=>[t("div",Y,[h(" 工作时长 "),e(l(U),{class:"wktime-info-pop",theme:"dark",placement:"top-start","close-on-click-action":!1,"close-on-click-outside":!1,"close-on-click-overlay":!1},{reference:i(()=>[ee]),default:i(()=>[Z]),_:1})])]),default:i(()=>[t("div",null,[t("span",{class:W({"gray-text-color":!o.value.overTime})},y(o.value.overTime),3),h(" 小时")])]),_:1}),e(c,{label:l(n)("base.btn.delHome"),isHaveRArrow:!0,onOnHandle:D},null,8,["label"])]),ae,t("div",te,[e(R,{disable:!0,handleTxt:l(n)("base.btn.editHome"),onOnHandle:C},null,8,["handleTxt"])])]),e(b,{ref_key:"confirmPopRef",ref:f,popClass:"family-details-dialog-box",customFooter:!0,onOnConfirm:H},{default:i(()=>[t("div",le,[t("div",oe,y(l(n)("base.confirmDelHome")),1),se])]),_:1},512),e(b,{ref_key:"exitMemberPopRef",ref:p,popClass:"family-details-dialog-box",customFooter:!0,onOnConfirm:I},{default:i(()=>[ne]),_:1},512),e(M,{ref_key:"previewImgRef",ref:g,imageList:[l(A)+o.value.pic]},null,8,["imageList"])]),_:1})}}});export{fe as default};
