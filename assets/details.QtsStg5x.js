import{m as O,d as S,f as L,n as V,o as U,u as Y,p as A,r as $,a as E}from"./index.C__3lhMr.js";import{l as F,R as q,i as K,r as u,b as Q,d as z,K as f,L as G,U as J,V as i,k as t,u as a,N as o,O as c,D as W}from"./vue.C2TeXnf4.js";import{_ as d}from"./BaseInfoItem.vue_vue_type_style_index_0_lang.MpSsZcmr.js";import{_ as X}from"./imprestSheet.vue_vue_type_script_setup_true_name_imprest-sheet_lang.DLKrKH2L.js";import"./right-arrow-icon.CaFxgYzl.js";import"./index.DcHIdklB.js";const Z={class:"add-home-box hk-flex hk-flex-col container-setPx"},ee={class:"add-home-form"},te={class:"staff-details-info"},ae=o("div",{class:"staff-details-info"},"管家",-1),oe={class:"staff-details-info"},ne={class:"staff-details-info"},se={class:"staff-details-info"},ie={class:"staff-details-info"},le={class:"staff-details-info"},de={class:"staff-details-info"},ce=o("div",{class:"footer-aux-btmbox"},null,-1),fe={class:"footer-btn-box"},re={class:"staff-details-dialog"},me={class:"pd-dialog-content"},_e=o("p",null,"提示：请勿忘记线下收回备用金",-1),ye=F({__name:"details",setup(ue){const{t:s}=Y(),I=q(),{id:r,homeId:m}=I.query,{hkMessage:_}=E(),v=K("endPageLoading"),{auth:y}=O(),{pushName:b,comeback:x}=S(),h=u(null),g=u(null),p=u(null),e=Q({nickname:"",avatar:"",homeName:"",birthday:"",contactInformation:"",identifyMsgId:"",duties:"",country:"",joinTime:0,countryId:0,currency:""}),T=l=>{A({identifyId:+r}).then(n=>{n.code===0?(e.avatar=n.data.avatar,e.nickname=n.data.nickname,e.homeName=n.data.homeName,e.birthday=n.data.birthday,e.contactInformation=n.data.contactInformation,e.identifyMsgId=n.data.identifyMsgId,e.country=n.data.country,e.duties=n.data.duties,e.joinTime=n.data.joinTime,e.countryId=n.data.countryId,e.currency=n.data.currency):_(n.msg)}).finally(()=>{l&&l()})},k=()=>{h.value.taggleDialog(!0)},M=()=>{$({identifyId:+r,homeId:+m}).then(l=>{l.code===0?x():_(l.msg)}).catch(l=>{_(l)})},B=()=>{b("HkEdit",{id:r,homeId:m})},C=()=>{p.value.taggleSheetVisible(!0)},P=l=>{b("ImpOperation",{id:r,homeId:m,currency:e.currency,doType:l.value})},H=()=>{g.value.taggleModal()};return z(()=>{T(v)}),(l,n)=>{const N=f("InfoItemImg"),R=f("BaseHandleBtn"),w=f("ConfrimPopAgain"),D=f("PreviewImage"),j=f("MainContainer");return G(),J(j,null,{header:i(()=>[t(L,{title:a(s)("base.staffInfoTxt")},null,8,["title"])]),default:i(()=>[o("div",Z,[o("div",ee,[t(d,{class:"pd-img",label:"照片"},{default:i(()=>[t(N,{class:"bi-info-img",imgUrl:e.avatar,onClick:H},null,8,["imgUrl"])]),_:1}),t(d,{label:a(s)("base.nameTxt")},{default:i(()=>[o("div",te,c(e.nickname),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.jopTxt")},{default:i(()=>[ae]),_:1},8,["label"]),t(d,{label:a(s)("base.belongHomeTxt")},{default:i(()=>[o("div",oe,c(e.homeName),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.nationTxt")},{default:i(()=>[o("div",ne,c(e.country),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.idCard")},{default:i(()=>[o("div",se,c(e.identifyMsgId),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.telNotxt")},{default:i(()=>[o("div",ie,c(e.contactInformation),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.birthdayTxt")},{default:i(()=>[o("div",le,c(e.birthday),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.entryTime")},{default:i(()=>[o("div",de,c(a(V)(e.joinTime*1e3).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),t(d,{label:a(s)("base.staffQuitTxt"),isHaveRArrow:!0,onOnHandle:k},null,8,["label"])]),ce,o("div",fe,[t(R,{firBtnTxt:a(s)("base.btn.editInfo"),secBtnTxt:a(y)===3?"划拨/收回备用金":"发放/收回备用金",onOnFirBtnHandle:B,onOnSecBtnHandle:C},null,8,["firBtnTxt","secBtnTxt"])])]),t(w,{ref_key:"confirmPopRef",ref:h,popClass:"staff-details-dialog-box",customFooter:!0,onOnConfirm:M},{default:i(()=>[o("div",re,[o("div",me,[W(c(a(s)("base.confirmDelStaff"))+" ",1),_e])])]),_:1},512),t(X,{ref_key:"imprestSheetRef",ref:p,onOnChange:P},null,512),t(D,{ref_key:"previewImgRef",ref:g,imageList:[a(U)+e.avatar]},null,8,["imageList"])]),_:1})}}});export{ye as default};
