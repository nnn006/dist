import{d as C,c as x,f as y,aA as A,aB as I,u as N,aC as b}from"./index.C__3lhMr.js";import{l as w,r as h,b as M,d as B,K as p,L as D,U as P,V as d,k as s,u as c,N as _}from"./vue.C2TeXnf4.js";const $={class:"staff-manage-box"},z={class:"staff-m-main-box hk-pt-noScreen"},O=w({name:"FamilyAcc",__name:"index",setup(F){const{t:L}=N(),{pushName:m}=C(),r=h(null),{pageLoading:v,endPageLoading:R}=x({activeAction:k}),t=M({page:1,pageSize:10,total:0}),l=h([]),f=g=>{const o={page:t.page,pageSize:t.pageSize,typ:2};b(o).then(a=>{if(a.code===0){const n=a.data.list.map(e=>({title:e.nickname,pic:e.avatar,job:e.duties,time:e.joinTime*1e3,homeName:e.homeName,id:e.identifyId,homeId:e.homeId}));o.page===1?l.value=n:l.value.push(...n),t.total=a.data.total}}).finally(()=>{var a,n;(a=r.value)==null||a.taggleRefreshState("isLoading",!1),(n=r.value)==null||n.taggleRefreshState("loading",!1),g&&g()})},S=()=>{t.page++,f()},u=()=>{t.page=1,f()};async function k(){u()}return B(()=>{f(R)}),(g,o)=>{const a=p("SecondHeader"),n=p("DownRefresh"),e=p("MainContainer");return D(),P(e,{exitLoading:!0,pageLoading:c(v)},{header:d(()=>[s(y,{title:c(L)("base.header.familyAccManage")},null,8,["title"])]),headerScreen:d(()=>[_("div",$,[s(a,{noScreen:!0})])]),default:d(()=>[_("div",z,[s(n,{ref_key:"downRefreshRef",ref:r,dataList:l.value,pagination:t,onOnRefresh:u,onOnLoad:S},{default:d(({data:i})=>[s(A,{existTime:!0,data:i,onClick:H=>c(m)("FamiDetails",{id:i.id,homeId:i.homeId})},null,8,["data","onClick"])]),_:1},8,["dataList","pagination"])]),s(I,{onClick:o[0]||(o[0]=i=>c(m)("FamilyAdd"))})]),_:1},8,["pageLoading"])}}});export{O as default};
