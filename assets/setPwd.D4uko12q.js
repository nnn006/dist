import{d as N,l as F,g as u,m,o as A,a as U,B as n,i,Q as c,x as o,H as R,_ as $,r as q,L as z,S as H}from"./vue.BCHSKM6y.js";import{u as L,y as M,c as Q,b as W,z as Z,x as p,C as j,t as E,E as _,A as x,d as G}from"./index.Cjri3_sP.js";const J={class:"set-pwd-box hk-pt-52"},K={class:"set-pwd-form"},X=["src"],Y=i("div",{class:"form-item-auxbox"},null,-1),ee=["src"],te=N({__name:"setPwd",setup(se){var g;const P=$(),y=L(),{pushName:v,comeback:S}=Q(),{tel:V,code:C}=P.query,b=F(Number((g=P.query)==null?void 0:g.type)),{t:a}=W(),k=u(()=>b.value===1?a("base.setPwdTxt"):a("base.setNewPwdTxt")),e=m({password:"",oncePwd:""}),r=m({passwordError:!1,oncePwdError:!1}),D=u(()=>e.password&&e.oncePwd===e.password&&!r.passwordError&&!r.oncePwdError),l=m({isPwdShow:!1,isOncePwdShow:!1}),f=u(()=>({pwdErr:[a("base.setPwdErrFir"),a("base.setPwdErrSec")],onceOwdErr:[a("base.setPwdErrTir")]})),T=()=>{const s=/.{8,16}/,t=/[a-zA-Z]/.test(e.password),w=/[0-9]/.test(e.password),d=/[\W_]/.test(e.password),I=(t?1:0)+(w?1:0)+(d?1:0);s.test(e.password)&&I>=2?r.passwordError=!1:r.passwordError=!0},O=()=>{e.oncePwd!==""&&e.oncePwd===e.password?r.oncePwdError=!1:r.oncePwdError=!0},h=s=>{l[s]=!l[s]},B=()=>{b.value===1?Z({newPassword:e.password,isSaveToken:!0}).then(async s=>{s.code===0?(y.setInforPwd(),S(),p({message:"设置密码成功"})):p({message:s.msg})}).catch(s=>{p({message:s})}):j({phone:V,code:C,password:e.password}).then(s=>{s.code===0?v("ModifySuccess"):p({message:s.msg})}).catch(s=>{p({message:s})})};return(s,t)=>{const w=q("FormItemPop");return A(),U(R,null,[n(M,{class:"set-pwd-header",title:k.value,comebackColor:"#0D0D0D"},null,8,["title"]),i("div",J,[i("div",K,[n(w,{label:o(a)("base.inputPwdTxt"),popVisible:r.passwordError,errorData:f.value.pwdErr},{default:c(()=>[n(o(E),{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=d=>e.password=d),type:l.isPwdShow?"text":"password",placeholder:o(a)("base.setPwdPld"),clearable:"","clear-icon":"cross",onBlur:T},{"right-icon":c(()=>[i("img",{class:"pwd-taggle-icon",src:l.isPwdShow?o(_):o(x),onClick:t[0]||(t[0]=d=>h("isPwdShow")),alt:""},null,8,X)]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["label","popVisible","errorData"]),Y,n(w,{label:o(a)("base.confirmPwdTxt"),popVisible:r.oncePwdError,errorData:f.value.onceOwdErr},{default:c(()=>[n(o(E),{modelValue:e.oncePwd,"onUpdate:modelValue":t[3]||(t[3]=d=>e.oncePwd=d),type:l.isOncePwdShow?"text":"password",placeholder:o(a)("base.setPwdOncePld"),clearable:"","clear-icon":"cross",onBlur:O},{"right-icon":c(()=>[i("img",{class:"pwd-taggle-icon",src:l.isOncePwdShow?o(_):o(x),onClick:t[2]||(t[2]=d=>h("isOncePwdShow")),alt:""},null,8,ee)]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["label","popVisible","errorData"])]),n(o(G),{class:"set-step-btn",disabled:!D.value,type:"primary",onClick:B},{default:c(()=>[z(H(o(a)("base.nextStep")),1)]),_:1},8,["disabled"])])],64)}}});export{te as default};
